<!DOCTYPE html><html><head><meta charset="utf-8"/><title>borrellil</title></head><body><xmp>
# Lab1b - JavaFX Program

>> | Earned | Possible | Criteria                                         |
>> | ------ | -------- | ------------------------------------------------ |
>> |   15   |    15    | Intermediate Commits                             |
>> |   60   |    60    | Technical quality (see point deductions in code) |
>> |   15   |    15    | Coding standard compliance and program clarity   |
>> |   10   |    10    | Following submission instructions                |
>
> # Feedback
> * Nice work!


# Calendar.java

```
/*
 * Course: CSC1020
 * Lab 1b - GitHub and FX and CheckStyle, OH MY!
 * JavaFX Program - Schedule
 * Name: Leonardo Borrelli
 * Last updated: 9/4/2024
 */
package borrellil;

import java.util.ArrayList;

/**
 * A weekly calendar of classes
 */
public class Calendar {
    private final ArrayList<Lecture> lectures = new ArrayList<>();

    /**
     * Adds a lecture to the calendar
     * @param lecture the lecture to add
     */
    public void addLecture(Lecture lecture) {
        lectures.add(lecture);
    }

    public ArrayList<Lecture> getLectures() {
        return lectures;
    }

    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        for(Lecture l : lectures) {
            sb.append(l.toString()).append("\n");
        }
        return sb.toString();
    }
}
```

# Controller.java

```
/*
 * Course: CSC1020
 * Lab 1b - GitHub and FX and CheckStyle, OH MY!
 * JavaFX Program - Schedule
 * Name: Leonardo Borrelli
 * Last updated: 9/4/2024
 */
package borrellil;

import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.SnapshotParameters;
import javafx.scene.canvas.Canvas;
import javafx.scene.canvas.GraphicsContext;
import javafx.scene.control.Alert;
import javafx.scene.control.Button;
import javafx.scene.control.CheckBox;
import javafx.scene.control.TextField;
import javafx.scene.image.WritableImage;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;
import javafx.scene.paint.Color;
import javafx.scene.text.Font;
import javafx.scene.text.FontPosture;
import javafx.scene.text.FontWeight;
import javafx.scene.text.TextAlignment;
import javafx.stage.FileChooser;
import javafx.stage.Stage;

import java.io.File;
import java.io.IOException;
import java.net.URL;
import java.nio.file.Path;
import java.util.ArrayList;
import java.util.ResourceBundle;

/**
 * Controller class for the Schedule app
 */
public class Controller implements Initializable {
    private final int startingHour = 8;
    private final int timeWidth = 50;
    private final int dayWidth = 150;
    private final int height = 60;
    private final int dayPadding = 20;
    private final ArrayList<CheckBox> boxes = new ArrayList<>();
    private final ArrayList<TextField> fields = new ArrayList<>();
    private final Calendar calendar = new Calendar();
    private Scene oldScene;
    private Stage stage;
    @FXML
    private CheckBox m8;
    @FXML
    private CheckBox m9;
    @FXML
    private CheckBox m10;
    @FXML
    private CheckBox m11;
    @FXML
    private CheckBox m12;
    @FXML
    private CheckBox m1;
    @FXML
    private CheckBox m2;
    @FXML
    private CheckBox m3;
    @FXML
    private CheckBox m4;
    @FXML
    private CheckBox m5;
    @FXML
    private CheckBox t8;
    @FXML
    private CheckBox t9;
    @FXML
    private CheckBox t10;
    @FXML
    private CheckBox t11;
    @FXML
    private CheckBox t12;
    @FXML
    private CheckBox t1;
    @FXML
    private CheckBox t2;
    @FXML
    private CheckBox t3;
    @FXML
    private CheckBox t4;
    @FXML
    private CheckBox t5;
    @FXML
    private CheckBox w8;
    @FXML
    private CheckBox w9;
    @FXML
    private CheckBox w10;
    @FXML
    private CheckBox w11;
    @FXML
    private CheckBox w12;
    @FXML
    private CheckBox w1;
    @FXML
    private CheckBox w2;
    @FXML
    private CheckBox w3;
    @FXML
    private CheckBox w4;
    @FXML
    private CheckBox w5;
    @FXML
    private CheckBox r8;
    @FXML
    private CheckBox r9;
    @FXML
    private CheckBox r10;
    @FXML
    private CheckBox r11;
    @FXML
    private CheckBox r12;
    @FXML
    private CheckBox r1;
    @FXML
    private CheckBox r2;
    @FXML
    private CheckBox r3;
    @FXML
    private CheckBox r4;
    @FXML
    private CheckBox r5;
    @FXML
    private CheckBox f8;
    @FXML
    private CheckBox f9;
    @FXML
    private CheckBox f10;
    @FXML
    private CheckBox f11;
    @FXML
    private CheckBox f12;
    @FXML
    private CheckBox f1;
    @FXML
    private CheckBox f2;
    @FXML
    private CheckBox f3;
    @FXML
    private CheckBox f4;
    @FXML
    private CheckBox f5;
    @FXML
    private TextField class8;
    @FXML
    private TextField class9;
    @FXML
    private TextField class10;
    @FXML
    private TextField class11;
    @FXML
    private TextField class12;
    @FXML
    private TextField class1;
    @FXML
    private TextField class2;
    @FXML
    private TextField class3;
    @FXML
    private TextField class4;
    @FXML
    private TextField class5;

    @Override
    public void initialize(URL url, ResourceBundle resourceBundle) {
        boxes.add(m8);
        boxes.add(m9);
        boxes.add(m10);
        boxes.add(m11);
        boxes.add(m12);
        boxes.add(m1);
        boxes.add(m2);
        boxes.add(m3);
        boxes.add(m4);
        boxes.add(m5);
        boxes.add(t8);
        boxes.add(t9);
        boxes.add(t10);
        boxes.add(t11);
        boxes.add(t12);
        boxes.add(t1);
        boxes.add(t2);
        boxes.add(t3);
        boxes.add(t4);
        boxes.add(t5);
        boxes.add(w8);
        boxes.add(w9);
        boxes.add(w10);
        boxes.add(w11);
        boxes.add(w12);
        boxes.add(w1);
        boxes.add(w2);
        boxes.add(w3);
        boxes.add(w4);
        boxes.add(w5);
        boxes.add(r8);
        boxes.add(r9);
        boxes.add(r10);
        boxes.add(r11);
        boxes.add(r12);
        boxes.add(r1);
        boxes.add(r2);
        boxes.add(r3);
        boxes.add(r4);
        boxes.add(r5);
        boxes.add(f8);
        boxes.add(f9);
        boxes.add(f10);
        boxes.add(f11);
        boxes.add(f12);
        boxes.add(f1);
        boxes.add(f2);
        boxes.add(f3);
        boxes.add(f4);
        boxes.add(f5);
        fields.add(class8);
        fields.add(class9);
        fields.add(class10);
        fields.add(class11);
        fields.add(class12);
        fields.add(class1);
        fields.add(class2);
        fields.add(class3);
        fields.add(class4);
        fields.add(class5);
    }

    public void setStage(Stage stage) {
        this.stage = stage;
    }

    @FXML
    private void cancel() {
        for (CheckBox c : boxes) {
            c.setSelected(false);
        }
        for (TextField f : fields) {
            f.clear();
        }
    }

    @FXML
    private void ok() {
        final int dayOffset = 10;
        final int maxNameLength = 12;
        for (int i = 0; i < boxes.size(); ++i) {
            if (boxes.get(i).isSelected()) {
                String name = fields.get(i % dayOffset).getText();
                if(name.length() > maxNameLength) {
                    name = name.substring(0, maxNameLength);
                }
                calendar.addLecture(new Lecture(Weekday.getWeekday(i),
                        i % dayOffset + startingHour, name));
            }
        }

        final int width = 800;
        final int height = 650;
        oldScene = stage.getScene();

        // make containers
        VBox root = new VBox();
        Scene calendarScene = new Scene(root);
        Canvas canvas = new Canvas(width, height);
        drawCalendar(canvas);
        final int buttonSpacing = 20;
        HBox buttonBox = new HBox();
        buttonBox.setAlignment(Pos.CENTER_RIGHT);
        buttonBox.setPadding(new Insets(buttonSpacing));
        buttonBox.setSpacing(buttonSpacing);
        // make buttons
        Button cancel = new Button("Cancel");
        cancel.setCancelButton(true);
        cancel.setOnAction(e -> {
            stage.setScene(oldScene);
            stage.show();
        });
        Button save = new Button("Save");
        save.setDefaultButton(true);

        save.setOnAction(e -> saveFile(canvas));
        buttonBox.getChildren().addAll(cancel, save);
        // add to scene and show
        root.getChildren().addAll(canvas, buttonBox);
        stage.setScene(calendarScene);
        stage.setTitle("Calendar");
        stage.show();
    }

    private void saveFile(Canvas canvas) {
        WritableImage snapshot = canvas.snapshot(new SnapshotParameters(), null);
        FileChooser chooser = new FileChooser();
        File out = chooser.showSaveDialog(stage.getScene().getWindow());
        if(out != null) {
            if(!out.getName().endsWith(".png")) {
                out = Path.of(out.toPath() + ".png").toFile();
            }
            try {
                javax.imageio.ImageIO.write(javafx.embed.swing
                        .SwingFXUtils.fromFXImage(snapshot, null), "png", out);
            } catch (IOException e) {
                Alert alert = new Alert(Alert.AlertType.ERROR);
                alert.setTitle("File error");
                alert.setHeaderText("Error saving file");
                alert.setContentText("Could not save file.");
                alert.show();
            }
        }
    }

    private void drawCalendar(Canvas canvas) {
        GraphicsContext gc = canvas.getGraphicsContext2D();
        // set background
        gc.setFill(Color.LIGHTBLUE);
        gc.fillRect(0, 0, canvas.getWidth(), canvas.getHeight());
        drawGrid(canvas);
        int currentY;
        currentY = addHeaderText(gc);
        addTimeSlots(gc, currentY);
        addLectures(gc, calendar);

    }

    private void addTimeSlots(GraphicsContext gc, int currentY) {
        String[] timeSlots = {"8:00", "9:00", "10:00", "11:00", "12:00", "1:00", "2:00", "3:00",
                "4:00", "5:00"};
        gc.setFill(Color.BLACK);
        currentY += height;
        for (String s : timeSlots) {
            gc.fillText(s, 0, currentY);
            currentY += height;
        }
    }

    private int addHeaderText(GraphicsContext gc) {
        int currentX = timeWidth + dayPadding;
        int currentY = height / 2;
        final String[] headers = {"Monday", "Tuesday", "Wednesday", "Thursday", "Friday"};
        gc.setFill(Color.WHITE);
        final int fontSize = 16;
        gc.setFont(Font.font("Arial", FontWeight.MEDIUM, FontPosture.ITALIC, fontSize));
        gc.setTextAlign(TextAlignment.JUSTIFY);
        gc.fillText("Time", 0, currentY);
        for (String s : headers) {
            gc.fillText(s, currentX, currentY);
            currentX += dayWidth;
        }
        return currentY;
    }

    private void drawGrid(Canvas canvas) {
        GraphicsContext gc = canvas.getGraphicsContext2D();
        gc.setFill(Color.BLACK);
        gc.fillRect(0, 0, canvas.getWidth(), height);
        // draw grid
        gc.setStroke(Color.DARKGRAY);
        int currentY = height;
        final int numSlots = 11;
        for (int i = 0; i < numSlots; ++i) {
            gc.strokeLine(0, currentY, canvas.getWidth(), currentY);
            currentY += height;
        }
        gc.strokeLine(0, canvas.getHeight(), canvas.getWidth(), canvas.getHeight());
        int currentX = timeWidth;
        final int numDays = 5;
        for (int i = 0; i <= numDays; ++i) {
            gc.strokeLine(currentX, 0, currentX, canvas.getHeight());
            currentX += dayWidth;
        }
    }

    private void addLectures(GraphicsContext gc, Calendar calendar) {
        ArrayList<Lecture> lectures = calendar.getLectures();
        gc.setStroke(Color.BLACK);
        int baseX = timeWidth + dayPadding;
        int baseY = height + height / 2;
        for (Lecture l : lectures) {
            int currentX = baseX + (dayWidth * l.day().getCode());
            int currentY = baseY + (height * (l.time() - startingHour));
            gc.strokeText(l.className(), currentX, currentY);
        }
    }
}
```

# Lecture.java

```
/*
 * Course: CSC1020
 * Lab 1b - GitHub and FX and CheckStyle, OH MY!
 * JavaFX Program - Schedule
 * Name: Leonardo Borrelli
 * Last updated: 9/4/2024
 */
package borrellil;

/**
 * A single lecture or lab instance for the calendar
 * @param day the day the lecture meets
 * @param time the time the lecture meets
 * @param className the name of the class
 */
public record Lecture(Weekday day, int time, String className) {

    @Override
    public String toString() {
        return day.name() + " " + time + ":00 " + className;
    }
}
```

# Schedule.java

```
/*
 * Course: CSC1020
 * Lab 1b - GitHub and FX and CheckStyle, OH MY!
 * JavaFX Program - Schedule
 * Name: Leonardo Borrelli
 * Last updated: 9/4/2024
 */
package borrellil;

import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.stage.Stage;

import java.io.IOException;

/**
 * Main class for the Schedule application
 */
public class Schedule extends Application {
    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage stage) {
        FXMLLoader loader = new FXMLLoader(getClass().getResource("schedule.fxml"));
        try {
            Parent root = loader.load();
            Controller controller = loader.getController();
            controller.setStage(stage);
            stage.setTitle("Schedule");
            stage.setScene(new Scene(root));
            stage.show();
        } catch (IOException e) {
            System.err.println("Could not load fxml file.");
        }
    }
}
```

# Weekday.java

```
/*
 * Course: CSC1020
 * Lab 1b - GitHub and FX and CheckStyle, OH MY!
 * JavaFX Program - Schedule
 * Name: Leonardo Borrelli
 * Last updated: 9/4/2024
 */
package borrellil;

/**
 * Simple enumeration of the weekdays
 */
public enum Weekday {
    /**
     * Monday
     */
    MONDAY(0),
    /**
     * Tuesday
     */
    TUESDAY(1),
    /**
     * Wednesday
     */
    WEDNESDAY(2),
    /**
     * Thursday
     */
    THURSDAY(3),
    /**
     * Friday
     */
    FRIDAY(4);

    private final int code;


    /**
     * Constructor for the Weekday to embed a numeric code for the day
     * @param code the day code
     */
    Weekday(int code) {
        this.code = code;
    }

    /**
     * Returns the correct weekday based on the offset from the Controller
     * @param offset the offset for the list of CheckBoxes
     * @return the corresponding weekday
     */
    public static Weekday getWeekday(int offset) {
        final int tStart = 10;
        final int wStart = 20;
        final int rStart = 30;
        final int fStart = 40;
        if(offset < tStart) {
            return MONDAY;
        } else if(offset < wStart) {
            return TUESDAY;
        } else if(offset < rStart) {
            return WEDNESDAY;
        } else if(offset < fStart) {
            return THURSDAY;
        } else {
            return FRIDAY;
        }
    }

    public int getCode() {
        return code;
    }
}
```

</xmp><script type="text/javascript" src="https://csse.msoe.us/gradedown.js"></script></body></html>
